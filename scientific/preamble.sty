\ProvidesPackage{preamble}

%----------------------------------------------------------------------------------------------------------------------
% package loading: general
%----------------------------------------------------------------------------------------------------------------------
\usepackage[utf8]{inputenc}                                 % allows ö,ä,ü in .tex source files
\usepackage[T1]{fontenc}                                    % sets fontencoding
\usepackage{lmodern}                                        % sets lmoderm font
\usepackage{import}                                         % allows for file-imports in documents
\usepackage{babel}                                          % language control
\usepackage{fancyhdr}                                       % fancy headers with lots of customization
\usepackage[table]{xcolor}                                  % color names 
\usepackage{float}                                          % adds several positions and support for latex floats
\usepackage{epigraph}                                       % adds an epigraph (quotation)
\usepackage{hhline}                                         % adds double-lines for tables
\usepackage{listings}                                       % adds environments for code-listings
\usepackage{bbm}                                            % allows for font scaling
\usepackage{cellspace}                                      % cell-vspace made easy
\usepackage{longtable}                                      % for loooooooong tables
\usepackage{xstring}                                        % conditionalize newcommands
\usepackage{multirow}                                       % allow table cells to span multiple rows
\usepackage{caption}                                        % make custom captions

%----------------------------------------------------------------------------------------------------------------------
% package loading: mathematics
%----------------------------------------------------------------------------------------------------------------------
\usepackage{amsmath}                                        % commom mathematics package  
\usepackage{amssymb}                                        % commom math symbols
\usepackage{amsthm}                                         % theme for ams math
\usepackage{amsfonts}                                       % fonts for ams
\usepackage{bm}                                             % bold math
\usepackage{cancel}                                         % adds a strikethrough in math-mode
\usepackage{esint}                                          % beautiful integrals
\usepackage{mathtools}                                      % math expansion set
\usepackage{siunitx}                                        % adds neat methods of writing si-units

%----------------------------------------------------------------------------------------------------------------------
% package loading: graphics
%----------------------------------------------------------------------------------------------------------------------
\usepackage{pgfplots}                                       % loads tikz as well, used for plots/graphics
\usepackage{tikz-3dplot}                                    % loads extra stuff for 3d-support in tikz
\usepackage{graphicx}                                       % provides some useful tools for rotations, etc.
\usepackage{geometry}                                       % page layout control

%----------------------------------------------------------------------------------------------------------------------
% package options: cellspace
%----------------------------------------------------------------------------------------------------------------------
\setlength\cellspacetoplimit{4pt}                           % sets space to cell-top    to  4 pts
\setlength\cellspacebottomlimit{4pt}                        % sets space to cell-bottom to  4 pts

%----------------------------------------------------------------------------------------------------------------------
% custom colors
%----------------------------------------------------------------------------------------------------------------------
\definecolor{dark_cyan}{RGB}{130, 234, 255}                 % defines the color dark_cyan
\definecolor{purple}{RGB}{180, 2, 212}                      % defines the color purple
\definecolor{green}{RGB}{0, 153, 51}                        % defines the color green
\definecolor{red}{RGB}{204, 0, 0}                           % defines the color red
\definecolor{blue}{RGB}{0, 102, 255}                        % defines the color blue
\definecolor{orange}{RGB}{227, 102, 0}                      % defines the color orange

\definecolor{codegreen}{rgb}{0,0.6,0}                       %
\definecolor{codegray}{rgb}{0.5,0.5,0.5}                    % colors for listings
\definecolor{codepurple}{rgb}{0.58,0,0.82}                  %
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}               %

%----------------------------------------------------------------------------------------------------------------------
% package options: geometry
%---------------------------------------------------------------------------------------------------------------------
\geometry{                                                    % set package options for geometry   
    a4paper,                                                  % sets paper-size to a4
    twoside,                                                  % sets the paper to be two-sided
    left=1.5cm,                                               % left page margin
    right=1.5cm,                                              % right page margin
    top=1cm,                                                  % top page margin
    bottom=1cm,                                               % botoom page margin
    includeheadfoot                                           % include footer in margin calculations
}

%----------------------------------------------------------------------------------------------------------------------
% package options: pgfplots
%----------------------------------------------------------------------------------------------------------------------
\pgfplotsset{compat=1.16}                                   % sets compatibility level of pgfplots

\usepgfplotslibrary{                                        % select specific additional libraries for pgf
    patchplots,                                             % allows for some crazy path manipulations
    fillbetween,                                            % able to easily fill area between two curves
    groupplots                                              % allows for multiple subplot in one tikzpicture
}

\usetikzlibrary{                                            % select additional libraries for tikz
  calc,                                                     % adds simple calculation methods
  arrows.meta,                                              % allows for fine-grained arrow stylization
  patterns,                                                 % adds some fill-patterns
  shapes.misc,                                              % more shapes for \draw
  patterns.meta,                                            % fine grained pattern control/definition
  decorations.pathmorphing,                                 % fine grained pattern control/definition
  matrix,                                                   % draw matrix like structures
  decorations                                               % path decorations (e.g. curly line with 'snake')
}

%----------------------------------------------------------------------------------------------------------------------
% set equation numbering | custom environments
%----------------------------------------------------------------------------------------------------------------------
% TODO: enable setting by custom class or move to class
\numberwithin{equation}{section}                            % number equations per section
\newtheorem{definition}{Definition}[section]                % number definitons per section
\newtheorem{theorem}{Theorem}[section]                      % number theorems per section
\newtheorem{example}{Example}[section]                      % number examples per section

\newcommand*\col[2]{\textcolor{#1}{#2}}                     % shorten textcolor command

%----------------------------------------------------------------------------------------------------------------------
% listings sample styling definiton 
% taken from: https://de.overleaf.com/learn/latex/code_listing
% to enable this style, add \lstset{style=code_style} in your preamble
%----------------------------------------------------------------------------------------------------------------------
\lstdefinestyle{code_style}{                                % defines a new style 'code_style'
    backgroundcolor=\color{backcolour},                     % sets the background color of the entire block
    commentstyle=\color{codegreen},                         % sets the color of comments to codegreen
    keywordstyle=\color{magenta},                           % sets the color of keywords to magenta
    numberstyle=\tiny\color{codegray},                      % makes line-numbers small and colors them gray
    stringstyle=\color{green},                              % sets the color of strings to green
    basicstyle=\ttfamily\footnotesize,                      % sets the font and size
    breakatwhitespace=false,                                % disable linebreaks at whitespace
    breaklines=true,                                        % enable automatic linebreaks of long lines
    captionpos=b,                                           % sets caption position to bottom
    keepspaces=true,                                        % converts tabs to spaces and keeps them for column width
    showspaces=false,                                       % disables space-indication with symbol
    showstringspaces=false,                                 % disables space-indication symbols in strings
    showtabs=false,                                         % disables tab-indication with symbol
    tabsize=1,                                              % sets conversion size of tabs
    numbers=left,                                           % sets position of line number
    numbersep=5pt                                           % sets distance between line number
}

%----------------------------------------------------------------------------------------------------------------------
% latex language definition for listings package
%----------------------------------------------------------------------------------------------------------------------
\lstdefinelanguage{latex}{                                  % defines a new language 'latex'
    keywords=[1]{usepackage,newcommand, begin, end,         %
                 document, documentclass,author,            % sets first type of keywords
                 ProvidesPackage,RequiresPackage            %
                },
    keywords=[2]{tabular,table,figure, tikzpicture,         %
                 tabularx, longtable,align,align*,          % sets second type of keywords
                 aligned,equation,equation*,                %
                 tikzpicture,circuitikz,center,             %
                 titlepage
                },
    keywords=[3]{relax,newcommand, renewcommand,            % sets third type of keywords
                 maketitle,makeatletter,makeatother         %
                },
    keywords=[4]{col}                                       % for custom defined keywords
    sensitive=true,                                         % case sensitivity
    keywordstyle=[1]\color{blue},                           % style for first type keywords
    keywordstyle=[2]\color{red},                            % style for second type keywords
    keywordstyle=[3]\color{green},                          % style for third type keywords
    keywordstyle=[4]\color{red}                             % style for custom keywords
    morestring=[b]'                                         % allows for single quote strings
}

%----------------------------------------------------------------------------------------------------------------------
% language defitino for pseudo-code 
%----------------------------------------------------------------------------------------------------------------------
\lstdefinelanguage{pseudo}{
  keywords=[1]{view, push, pop, insert, delete},
  keywords=[2]{name,for,begin,end,input,if,then,output,return, while, else},
  keywords=[3]{bool,int,float,double,string,data}
  sensitive=true,
  keywordstyle=[1]\color{blue},
  keywordstyle=[2]\color{purple},
  keywordstyle=[3]\color{red}
}

%----------------------------------------------------------------------------------------------------------------------
% defines a new environment for pseudo-code algorithms and declares a new counter 
%----------------------------------------------------------------------------------------------------------------------

% beautiful solution by: https://tex.stackexchange.com/users/69177/pnpo
% answered in: https://tex.stackexchange.com/questions/111116/what-is-the-best-looking-pseudo-code-package
\newcounter{nalg}[section]
\newcommand{\algcountlayer}{\thesection}
\renewcommand{\thenalg}{\algcountlayer.\arabic{nalg}} 
\newcommand{\algcapname}{Algorithm}
\DeclareCaptionLabelFormat{algocaption}{\algcapname\quad\thenalg}

\lstnewenvironment{algorithm}[1][] 
{   
  \refstepcounter{nalg} 
  \captionsetup{labelformat=algocaption,labelsep=colon}
  \lstset{
    mathescape=true,
    frame=tB,
    numbers=left, 
    numberstyle=\tiny,
    basicstyle=\scriptsize, 
    keywordstyle=\color{black}\bfseries,
    numbers=left,
    xleftmargin=.04\textwidth,
    #1 
  }
}
{}
